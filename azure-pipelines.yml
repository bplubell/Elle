trigger:
- main
pr:
- main

stages:
- stage:
  jobs:
  - job:
    steps:
      - task: DotNetCoreCLI@2
        inputs:
          command: 'restore'
      - task: DotNetCoreCLI@2
        inputs:
          command: 'build'
          arguments: '--configuration Release'
      - task: DotNetCoreCLI@2
        inputs:
          command: 'publish'
          publishWebProjects: false
          arguments: '--configuration Release --runtime linux-x64 --self-contained --output $(Build.ArtifactStagingDirectory)'
          zipAfterPublish: true
      - task: AzureRmWebAppDeployment@4
        inputs:
          ConnectionType: 'AzureRM'
          azureSubscription: 'azureConnection'
          WebAppName: ellecal
          packageForLinux: '$(Build.ArtifactStagingDirectory)/*.zip'
